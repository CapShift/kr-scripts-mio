<?xml version="1.0" encoding="UTF-8" ?>
<items>
    <group>
        <switch>
            <title>测试环境变量</title>
            <desc>查看环境变量</desc>
            <setstate>file:///android_asset/kr-script/test/var.sh</setstate>
        </switch>
        <action>
            <title>参数类型列举</title>
            <params>
                <param name="param_one" label="普通变量 param_one">
                    <option value="A">测试一下 A</option>
                    <option value="B">测试一下 B</option>
                </param>
                <param name="param_two" label="普通变量 param_two">
                    <option value="Z">测试一下 Z</option>
                    <option value="X">测试一下 X</option>
                </param>
                <param name="param_int" label="数字" desc="只能输入数字，数值在10~100以内，不能为空" max="100" min="10" required="required" type="int" />
                <param name="param_seekbar" title="数字（滑块）" max="100" min="10" type="seekbar" value="50" />
                <param name="param_bool" label="选框" type="bool" />
                <param name="param_file" label="文件选择" type="file" value="/sdcard/Download/MIUI_update_20190920_ota_sagit.zip" />
            </params>
            <script>file:///android_asset/kr-script/test/var.sh</script>
        </action>

        <action>
            <title>调用内置的网页浏览界面</title>
            <desc>am start -a android.intent.action.MAIN -n "$activity" --es url "$url"</desc>
            <script>
                # 使用am start启动activity的说明
                # 添加Extras
                #   --ei 整数参数【extra integer】
                #   --es 字符串参数【extra string】
                #   --ez Boolean【extra boolean】

                url="https://cn.bing.com"
                activity="$PACKAGE_NAME/com.projectkr.shell.ActionPageOnline"
                am start -a android.intent.action.MAIN -n "$activity" --es url "$url"

                # 对应到Java中取出参数的过程
                # Intent intent = getIntent();
                # String webPage = intent.getStringExtra("url");
            </script>
        </action>

        <action>
            <title>调用内置的网页浏览界面下载文件</title>
            <desc>am start -a android.intent.action.MAIN -n "$activity" --es downloadUrl "$url"</desc>
            <script>
                # intent参数
                # --es downloadUrl 【url】下载路径
                # --ez autoClose autoClose 【true/false】 是否下载完成后自动关闭界面

                downloadUrl="https://hugeota.d.miui.com/9.8.28/miui-blockota-sagit-9.8.27-9.8.28-cfa9921c33-9.0.zip"
                activity="$PACKAGE_NAME/com.projectkr.shell.ActionPageOnline"
                am start -a android.intent.action.MAIN -n "$activity" --es downloadUrl "$downloadUrl"
            </script>
        </action>

        <action>
            <title>试验* 下载测试2</title>
            <desc>使用封装的downloader.sh等待下载结果</desc>
            <resource file="file:///android_asset/kr-script/downloader.sh" />
            <script>
                source $START_DIR/kr-script/downloader.sh

                md5="cfa9921c332d7d07335ddba75399c74d" # 预期的文件md5(小写,可选)
                downloadUrl="https://hugeota.d.miui.com/9.8.28/miui-blockota-sagit-9.8.27-9.8.28-cfa9921c33-9.0.zip"
                downloader "$downloadUrl" $md5

                if [[ ! "$downloader_result" = "" ]]; then
                echo '下载到：'$downloader_result
                else
                echo '下载失败'$downloader_result
                fi
            </script>
        </action>
    </group>
</items>